<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/favicon.png">
  <link rel="apple-touch-icon" href="/favicon.png">
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous"> -->
  <title>Varda Vault</title>
  <link rel="stylesheet" href="/index.bc0daea6.css">
  <link rel="stylesheet" href="/index.a2cc9e2a.css">
</head>
<body>
  <div class="bg-dark text-secondary px-4 py-5 text-center" id="signed-out-flow">
    <div class="py-5">
      <h1 class="display-5 fw-bold text-white">Varda NFT Unlockable Content</h1>
      <div class="col-lg-6 mx-auto">
        <p class="fs-5 mb-4">This is a free tool to attach secret content to your NEAR NFTs.<br>
		Allow access to your online content for your NEAR NFT collectors using our 
	      </p>
        <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
          <button type="button" class="btn btn-outline-info btn-lg px-4 me-sm-3 fw-bold" id="sign-in-button">Lock Content</button>
          <button type="button" class="btn btn-outline-light btn-lg px-4" onclick="window.open('https://api.varda.vision');">Gaming API</button>
        </div>
      </div>
    </div>
	<footer class="mt-auto text-white-50">
    <p>Kindly built by the <a href="https://www.varda.vision/" class="text-white keychainify-checked">Varda</a>, dev <a href="https://twitter.com/jeeltcraft" class="text-white keychainify-checked">team</a>.</p>
  </footer>
  </div>
<div class="bg-dark text-secondary px-4 py-5 text-center" id="signed-in-flow">
	<button style="float: right; margin-left: 1em" class="btn btn-outline-light px-4" id="telegram" onclick="window.open('https://t.me/varda_vault');">
      Telegram 
    </button>
	<button style="float: right" class="btn btn-outline-info px-4" id="sign-out-button">
      Sign out 
    </button>&nbsp;
    <div class="py-5">
      <h3>
        Hello <span class="greeting" data-behavior="account-id"></span>
      </h3>
      <div class="col-lg-12 mx-auto">
		<br>
        <p class="fs-9 mb-4">Can't see your NFTs?
          <button type="button" class="btn btn-outline-light px-8" href="mailto:jeeltcraft@gmail.com?subject=Please index my collection collection-name&body=This is the link to my 10 near transaction to jilt.near to allow me to attach unlockable content to my NFTs">Get Indexed</button>
        </p>
		<ol class="list-group list-group-numbered" id="locker">
		</ol>
      </div>
    </div>
	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h1 class="modal-title fs-5" id="exampleModalLabel"></h1>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<script type="text/javascript">var currentUnlock;
var straw;
var relay = "https://Varda-vault-relay-server.jilt1.repl.co/locked";
function unLockAble(elem) {
    document.getElementById("exampleModalLabel").innerHTML = elem.title;
    currentUnlock = elem.id;
    const listDbUploads = async ()=>{
        const fetchUploads = await fetch(relay);
        const data = await fetchUploads.json();
        const stdatastr = JSON.stringify(data);
        straw = JSON.parse(stdatastr);
        console.log(straw);
        var strawDb = straw.filter(function(db) {
            return db.id == elem.id;
        });
        console.log(strawDb);
        if (strawDb.length != 0) {
            document.getElementById("unlockable").classList.add("show");
            document.getElementById("unlockable").classList.remove("hide");
            document.getElementById("uplocker").classList.add("hide");
            document.getElementById("uplocker").classList.remove("show");
        }
        document.getElementById("getting").onclick = function() {
            getUnlock();
        };
        function getUnlock() {
            var immutable = strawDb[0].CID;
            var linked = strawDb[0].link;
            if (immutable != "") window.open("https://cloudflare-ipfs.com/ipfs/" + immutable);
            else window.open(linked);
        }
    };
    listDbUploads();
}
function addUnlock() {
    let eCID = document.getElementById("CID").value;
    let eLink = document.getElementById("link").value;
    let addendum = {
        CID: eCID,
        id: currentUnlock,
        link: eLink
    };
    straw.push(addendum);
    lockable();
    async function lockable() {
        const res = await fetch(relay, {
            method: "POST",
            headers: {
                "Content-type": "application/json"
            },
            body: JSON.stringify(addendum)
        });
        console.log("uploaded");
    }
}

</script>
					<div id="unlockable" class="hide">
						<a type="button" id="getting" target="_blank" class="btn btn-outline-info">Get unlockable</a>
					</div>
					<div id="uplocker" class="show">
						<h2>Upload Unlockable</h2>
							<p>
								<a type="button" class="btn btn-outline-info" href="https://github.com/jilt/varda-vault#readme" title="tutorial" alt="tutorial" target="_blank">Creators Guide</a> <a type="button" class="btn btn-outline-info" href="https://github.com/jilt/varda-vault#readme" title="coming soon">Check link API</a>
							</p>
							<div classname="form-control">
								<label classname="labUp">Unlockable CID</label>
								<input type="text" placeholder="file's CID here" id="CID">
							</div>
							<br>
							<div classname="form-control">
								<label classname="labUp">Unlockable link</label>
								<input type="text" placeholder="https://me.io" id="link">
							</div>
							<br>
							<button type="button" class="btn btn-outline-info" onclick="addUnlock()">Save Unlockable</button>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-outline" data-bs-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<footer class="mt-auto text-white-50">
    <p>Kindly built by the <a href="https://www.varda.vision/" class="text-white keychainify-checked">Varda</a>, dev <a href="https://twitter.com/jeeltcraft" class="text-white keychainify-checked">team</a>.</p>
  </footer>
  </div>
  <script src="/index.3d214d75.js" defer=""></script>
</body>
</html>
